{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/app.js","src/js/components/appbar.js","src/js/components/index.js","src/js/components/listItems.js","src/js/components/sectionTabs.js","src/js/index.js","src/js/polyfill.js","src/js/scrollHorizontal.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import AppBar from './components/appbar'\r\nimport ListItems from './components/listItems'\r\nimport SectionTabs from './components/sectionTabs'\r\n\r\nwindow.onload = function() {\r\n  const appBars = Array.from(document.querySelectorAll('.appbar'));\r\n  const listItems = Array.from(document.querySelectorAll('.list-items'));\r\n  const sectionTabs = Array.from(document.querySelectorAll('.section-tabs'));\r\n\r\n  appBars.forEach(appBar => new AppBar(appBar))\r\n  listItems.forEach(list => new ListItems(list))\r\n  sectionTabs.forEach(section => new SectionTabs(section))\r\n}","class AppBar {\r\n  constructor(el) {\r\n    this.el = el;\r\n    this.btn = this.el.querySelector('[data-toggle=\"appbar\"]');\r\n\r\n    this.handlers();\r\n  }\r\n\r\n  handlers() {\r\n    this.btn.addEventListener('click', () => {\r\n      this.el.classList.toggle('in');\r\n    })\r\n  }\r\n}\r\n\r\nexport default AppBar;","import './appbar'\r\nimport './listItems'\r\nimport './sectionTabs'","import scrollHorizontal from '../scrollHorizontal';\r\n\r\nclass ListItems {\r\n  constructor(el) {\r\n    this.el = el;\r\n\r\n    scrollHorizontal(this.el);\r\n  }\r\n}\r\n\r\nexport default ListItems;","import scrollHorizontal from '../scrollHorizontal';\r\n\r\nclass SectionTabs {\r\n  constructor(el) {\r\n    this.el = el;\r\n    this.navs = Array.from(this.el.querySelectorAll('.nav > li > a'));\r\n    this.sectionActive = this.el.querySelector('.section.active');\r\n\r\n    if (this.sectionActive) {\r\n      this.scrollToSection(this.sectionActive);\r\n    }\r\n    scrollHorizontal(this.el);\r\n    this.handlers();\r\n  }\r\n\r\n  handlers() {\r\n    const self = this;\r\n\r\n    this.navs.forEach(nav => {\r\n      nav.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n\r\n        const sectionId = this.getAttribute('href');\r\n        const parent = this.parentNode;\r\n        const isActive = parent.classList.contains('active');\r\n        const sectionActive = self.el.querySelector(sectionId);\r\n\r\n        if (isActive) return;\r\n\r\n        self.scrollToSection(sectionActive);\r\n      });\r\n    });\r\n  }\r\n\r\n  scrollToSection(sectionEl) {\r\n    const contentEl = sectionEl.closest('.content');\r\n\r\n    this.updateState(sectionEl);\r\n\r\n    if (contentEl.scrollTo) {\r\n      contentEl.scrollTo({ behavior: 'smooth', left: sectionEl.offsetLeft });\r\n    } else {\r\n      contentEl.scrollLeft = sectionEl.offsetLeft;\r\n    }\r\n  }\r\n\r\n  updateState(sectionEl) {\r\n    const sectionId = sectionEl.id;\r\n    const navEl = this.el.querySelector('.nav');\r\n\r\n    this.el.querySelector('.content .active').classList.remove('active');\r\n\r\n    if (navEl) {\r\n      this.el.querySelector('.nav .active').classList.remove('active');\r\n    }\r\n\r\n    sectionEl.classList.add('active');\r\n\r\n    if (sectionId && navEl) {\r\n      this.el.querySelector(`.nav [href=\"#${sectionId}\"]`).classList.add('active');\r\n    }\r\n  }\r\n}\r\n\r\nexport default SectionTabs","import './polyfill'\r\n\r\nimport './components'\r\n\r\nimport './app'","// Array.from\r\nif (!Array.from) {\r\n  Array.from = (function() {\r\n    var toStr = Object.prototype.toString;\r\n    var isCallable = function(fn) {\r\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\r\n    };\r\n    var toInteger = function(value) {\r\n      var number = Number(value);\r\n      if (isNaN(number)) {\r\n        return 0;\r\n      }\r\n      if (number === 0 || !isFinite(number)) {\r\n        return number;\r\n      }\r\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\r\n    };\r\n    var maxSafeInteger = Math.pow(2, 53) - 1;\r\n    var toLength = function(value) {\r\n      var len = toInteger(value);\r\n      return Math.min(Math.max(len, 0), maxSafeInteger);\r\n    };\r\n\r\n    // La propriété length de la méthode vaut 1.\r\n    return function from(arrayLike /*, mapFn, thisArg */) {\r\n      // 1. Soit C, la valeur this\r\n      var C = this;\r\n\r\n      // 2. Soit items le ToObject(arrayLike).\r\n      var items = Object(arrayLike);\r\n\r\n      // 3. ReturnIfAbrupt(items).\r\n      if (arrayLike == null) {\r\n        throw new TypeError(\r\n          'Array.from doit utiliser un objet semblable à un tableau - null ou undefined ne peuvent pas être utilisés'\r\n        );\r\n      }\r\n\r\n      // 4. Si mapfn est undefined, le mapping sera false.\r\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\r\n      var T;\r\n      if (typeof mapFn !== 'undefined') {\r\n        // 5. sinon\r\n        // 5. a. si IsCallable(mapfn) est false, on lève une TypeError.\r\n        if (!isCallable(mapFn)) {\r\n          throw new TypeError('Array.from: lorsqu il est utilisé le deuxième argument doit être une fonction');\r\n        }\r\n\r\n        // 5. b. si thisArg a été fourni, T sera thisArg ; sinon T sera undefined.\r\n        if (arguments.length > 2) {\r\n          T = arguments[2];\r\n        }\r\n      }\r\n\r\n      // 10. Soit lenValue pour Get(items, \"length\").\r\n      // 11. Soit len pour ToLength(lenValue).\r\n      var len = toLength(items.length);\r\n\r\n      // 13. Si IsConstructor(C) vaut true, alors\r\n      // 13. a. Soit A le résultat de l'appel à la méthode interne [[Construct]] avec une liste en argument qui contient l'élément len.\r\n      // 14. a. Sinon, soit A le résultat de ArrayCreate(len).\r\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\r\n\r\n      // 16. Soit k égal à 0.\r\n      var k = 0; // 17. On répète tant que k < len…\r\n      var kValue;\r\n      while (k < len) {\r\n        kValue = items[k];\r\n        if (mapFn) {\r\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\r\n        } else {\r\n          A[k] = kValue;\r\n        }\r\n        k += 1;\r\n      }\r\n      // 18. Soit putStatus égal à Put(A, \"length\", len, true).\r\n      A.length = len; // 20. On renvoie A.\r\n      return A;\r\n    };\r\n  })();\r\n}\r\n// Element.closest\r\nif (window.Element && !Element.prototype.closest) {\r\n  Element.prototype.closest = function(s) {\r\n    var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n      i,\r\n      el = this;\r\n    do {\r\n      i = matches.length;\r\n      while (--i >= 0 && matches.item(i) !== el) {}\r\n    } while (i < 0 && (el = el.parentElement));\r\n    return el;\r\n  };\r\n}\r\n","const mousewheelevt = /Firefox/i.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel';\r\nconst scrollSpeed = 20;\r\n\r\nconst scrollHorizontal = function(el) {\r\n  let scroll = 0;\r\n\r\n  const contentEl = el.querySelector('.content');\r\n  const itemLast = contentEl.children[contentEl.children.length - 1];\r\n  const scrollMax = itemLast.offsetLeft + itemLast.offsetWidth - contentEl.offsetLeft - contentEl.offsetWidth;\r\n\r\n  contentEl.addEventListener(mousewheelevt, function(e) {\r\n    e.preventDefault();\r\n\r\n    const diffScroll = contentEl.scrollLeft - scroll;\r\n\r\n    if (Math.abs(diffScroll) > scrollSpeed) {\r\n      return scroll = contentEl.scrollLeft;\r\n    }\r\n\r\n    if((e.wheelDelta || e.detail) > 0) {\r\n      if (scroll >= 0) scroll -= scrollSpeed;\r\n    } else {\r\n      if (scroll <= scrollMax) scroll += scrollSpeed;\r\n    }\r\n\r\n    contentEl.scrollLeft = scroll;\r\n  })\r\n}\r\n\r\nexport default scrollHorizontal;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxjb21wb25lbnRzXFxhcHBiYXIuanMiLCJzcmNcXGpzXFxjb21wb25lbnRzXFxpbmRleC5qcyIsInNyY1xcanNcXGNvbXBvbmVudHNcXGxpc3RJdGVtcy5qcyIsInNyY1xcanNcXGNvbXBvbmVudHNcXHNlY3Rpb25UYWJzLmpzIiwic3JjXFxqc1xcaW5kZXguanMiLCJzcmNcXGpzXFxwb2x5ZmlsbC5qcyIsInNyY1xcanNcXHNjcm9sbEhvcml6b250YWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsT0FBTyxNQUFQLEdBQWdCLFlBQVc7QUFDekIsTUFBTSxVQUFVLE1BQU0sSUFBTixDQUFXLFNBQVMsZ0JBQVQsQ0FBMEIsU0FBMUIsQ0FBWCxDQUFoQjtBQUNBLE1BQU0sWUFBWSxNQUFNLElBQU4sQ0FBVyxTQUFTLGdCQUFULENBQTBCLGFBQTFCLENBQVgsQ0FBbEI7QUFDQSxNQUFNLGNBQWMsTUFBTSxJQUFOLENBQVcsU0FBUyxnQkFBVCxDQUEwQixlQUExQixDQUFYLENBQXBCOztBQUVBLFVBQVEsT0FBUixDQUFnQjtBQUFBLFdBQVUscUJBQVcsTUFBWCxDQUFWO0FBQUEsR0FBaEI7QUFDQSxZQUFVLE9BQVYsQ0FBa0I7QUFBQSxXQUFRLHdCQUFjLElBQWQsQ0FBUjtBQUFBLEdBQWxCO0FBQ0EsY0FBWSxPQUFaLENBQW9CO0FBQUEsV0FBVywwQkFBZ0IsT0FBaEIsQ0FBWDtBQUFBLEdBQXBCO0FBQ0QsQ0FSRDs7Ozs7Ozs7Ozs7OztJQ0pNLE07QUFDSixrQkFBWSxFQUFaLEVBQWdCO0FBQUE7O0FBQ2QsU0FBSyxFQUFMLEdBQVUsRUFBVjtBQUNBLFNBQUssR0FBTCxHQUFXLEtBQUssRUFBTCxDQUFRLGFBQVIsQ0FBc0Isd0JBQXRCLENBQVg7O0FBRUEsU0FBSyxR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RSxVQUFGLElBQWdCLEVBQUUsTUFBbkIsSUFBNkIsQ0FBaEMsRUFBbUM7QUFDakMsVUFBSSxVQUFVLENBQWQsRUFBaUIsVUFBVSxXQUFWO0FBQ2xCLEtBRkQsTUFFTztBQUNMLFVBQUksVUFBVSxTQUFkLEVBQXlCLFVBQVUsV0FBVjtBQUMxQjs7QUFFRCxjQUFVLFVBQVYsR0FBdUIsTUFBdkI7QUFDRCxHQWhCRDtBQWlCRCxDQXhCRDs7a0JBMEJlLGdCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBBcHBCYXIgZnJvbSAnLi9jb21wb25lbnRzL2FwcGJhcidcclxuaW1wb3J0IExpc3RJdGVtcyBmcm9tICcuL2NvbXBvbmVudHMvbGlzdEl0ZW1zJ1xyXG5pbXBvcnQgU2VjdGlvblRhYnMgZnJvbSAnLi9jb21wb25lbnRzL3NlY3Rpb25UYWJzJ1xyXG5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IGFwcEJhcnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHBiYXInKSk7XHJcbiAgY29uc3QgbGlzdEl0ZW1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdC1pdGVtcycpKTtcclxuICBjb25zdCBzZWN0aW9uVGFicyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tdGFicycpKTtcclxuXHJcbiAgYXBwQmFycy5mb3JFYWNoKGFwcEJhciA9PiBuZXcgQXBwQmFyKGFwcEJhcikpXHJcbiAgbGlzdEl0ZW1zLmZvckVhY2gobGlzdCA9PiBuZXcgTGlzdEl0ZW1zKGxpc3QpKVxyXG4gIHNlY3Rpb25UYWJzLmZvckVhY2goc2VjdGlvbiA9PiBuZXcgU2VjdGlvblRhYnMoc2VjdGlvbikpXHJcbn0iLCJjbGFzcyBBcHBCYXIge1xyXG4gIGNvbnN0cnVjdG9yKGVsKSB7XHJcbiAgICB0aGlzLmVsID0gZWw7XHJcbiAgICB0aGlzLmJ0biA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignW2RhdGEtdG9nZ2xlPVwiYXBwYmFyXCJdJyk7XHJcblxyXG4gICAgdGhpcy5oYW5kbGVycygpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlcnMoKSB7XHJcbiAgICB0aGlzLmJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKCdpbicpO1xyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcEJhcjsiLCJpbXBvcnQgJy4vYXBwYmFyJ1xyXG5pbXBvcnQgJy4vbGlzdEl0ZW1zJ1xyXG5pbXBvcnQgJy4vc2VjdGlvblRhYnMnIiwiaW1wb3J0IHNjcm9sbEhvcml6b250YWwgZnJvbSAnLi4vc2Nyb2xsSG9yaXpvbnRhbCc7XHJcblxyXG5jbGFzcyBMaXN0SXRlbXMge1xyXG4gIGNvbnN0cnVjdG9yKGVsKSB7XHJcbiAgICB0aGlzLmVsID0gZWw7XHJcblxyXG4gICAgc2Nyb2xsSG9yaXpvbnRhbCh0aGlzLmVsKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpc3RJdGVtczsiLCJpbXBvcnQgc2Nyb2xsSG9yaXpvbnRhbCBmcm9tICcuLi9zY3JvbGxIb3Jpem9udGFsJztcclxuXHJcbmNsYXNzIFNlY3Rpb25UYWJzIHtcclxuICBjb25zdHJ1Y3RvcihlbCkge1xyXG4gICAgdGhpcy5lbCA9IGVsO1xyXG4gICAgdGhpcy5uYXZzID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYgPiBsaSA+IGEnKSk7XHJcbiAgICB0aGlzLnNlY3Rpb25BY3RpdmUgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLmFjdGl2ZScpO1xyXG5cclxuICAgIGlmICh0aGlzLnNlY3Rpb25BY3RpdmUpIHtcclxuICAgICAgdGhpcy5zY3JvbGxUb1NlY3Rpb24odGhpcy5zZWN0aW9uQWN0aXZlKTtcclxuICAgIH1cclxuICAgIHNjcm9sbEhvcml6b250YWwodGhpcy5lbCk7XHJcbiAgICB0aGlzLmhhbmRsZXJzKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVycygpIHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMubmF2cy5mb3JFYWNoKG5hdiA9PiB7XHJcbiAgICAgIG5hdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25JZCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJyk7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xyXG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkFjdGl2ZSA9IHNlbGYuZWwucXVlcnlTZWxlY3RvcihzZWN0aW9uSWQpO1xyXG5cclxuICAgICAgICBpZiAoaXNBY3RpdmUpIHJldHVybjtcclxuXHJcbiAgICAgICAgc2VsZi5zY3JvbGxUb1NlY3Rpb24oc2VjdGlvbkFjdGl2ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1NlY3Rpb24oc2VjdGlvbkVsKSB7XHJcbiAgICBjb25zdCBjb250ZW50RWwgPSBzZWN0aW9uRWwuY2xvc2VzdCgnLmNvbnRlbnQnKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVN0YXRlKHNlY3Rpb25FbCk7XHJcblxyXG4gICAgaWYgKGNvbnRlbnRFbC5zY3JvbGxUbykge1xyXG4gICAgICBjb250ZW50RWwuc2Nyb2xsVG8oeyBiZWhhdmlvcjogJ3Ntb290aCcsIGxlZnQ6IHNlY3Rpb25FbC5vZmZzZXRMZWZ0IH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29udGVudEVsLnNjcm9sbExlZnQgPSBzZWN0aW9uRWwub2Zmc2V0TGVmdDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVN0YXRlKHNlY3Rpb25FbCkge1xyXG4gICAgY29uc3Qgc2VjdGlvbklkID0gc2VjdGlvbkVsLmlkO1xyXG4gICAgY29uc3QgbmF2RWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5uYXYnKTtcclxuXHJcbiAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50IC5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHJcbiAgICBpZiAobmF2RWwpIHtcclxuICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubmF2IC5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWN0aW9uRWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgaWYgKHNlY3Rpb25JZCAmJiBuYXZFbCkge1xyXG4gICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoYC5uYXYgW2hyZWY9XCIjJHtzZWN0aW9uSWR9XCJdYCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uVGFicyIsImltcG9ydCAnLi9wb2x5ZmlsbCdcclxuXHJcbmltcG9ydCAnLi9jb21wb25lbnRzJ1xyXG5cclxuaW1wb3J0ICcuL2FwcCciLCIvLyBBcnJheS5mcm9tXHJcbmlmICghQXJyYXkuZnJvbSkge1xyXG4gIEFycmF5LmZyb20gPSAoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xyXG4gICAgdmFyIGlzQ2FsbGFibGUgPSBmdW5jdGlvbihmbikge1xyXG4gICAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nIHx8IHRvU3RyLmNhbGwoZm4pID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xyXG4gICAgfTtcclxuICAgIHZhciB0b0ludGVnZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICB2YXIgbnVtYmVyID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgaWYgKGlzTmFOKG51bWJlcikpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfVxyXG4gICAgICBpZiAobnVtYmVyID09PSAwIHx8ICFpc0Zpbml0ZShudW1iZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gKG51bWJlciA+IDAgPyAxIDogLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhudW1iZXIpKTtcclxuICAgIH07XHJcbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xyXG4gICAgdmFyIHRvTGVuZ3RoID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgdmFyIGxlbiA9IHRvSW50ZWdlcih2YWx1ZSk7XHJcbiAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChsZW4sIDApLCBtYXhTYWZlSW50ZWdlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIExhIHByb3ByacOpdMOpIGxlbmd0aCBkZSBsYSBtw6l0aG9kZSB2YXV0IDEuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gZnJvbShhcnJheUxpa2UgLyosIG1hcEZuLCB0aGlzQXJnICovKSB7XHJcbiAgICAgIC8vIDEuIFNvaXQgQywgbGEgdmFsZXVyIHRoaXNcclxuICAgICAgdmFyIEMgPSB0aGlzO1xyXG5cclxuICAgICAgLy8gMi4gU29pdCBpdGVtcyBsZSBUb09iamVjdChhcnJheUxpa2UpLlxyXG4gICAgICB2YXIgaXRlbXMgPSBPYmplY3QoYXJyYXlMaWtlKTtcclxuXHJcbiAgICAgIC8vIDMuIFJldHVybklmQWJydXB0KGl0ZW1zKS5cclxuICAgICAgaWYgKGFycmF5TGlrZSA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcclxuICAgICAgICAgICdBcnJheS5mcm9tIGRvaXQgdXRpbGlzZXIgdW4gb2JqZXQgc2VtYmxhYmxlIMOgIHVuIHRhYmxlYXUgLSBudWxsIG91IHVuZGVmaW5lZCBuZSBwZXV2ZW50IHBhcyDDqnRyZSB1dGlsaXPDqXMnXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gNC4gU2kgbWFwZm4gZXN0IHVuZGVmaW5lZCwgbGUgbWFwcGluZyBzZXJhIGZhbHNlLlxyXG4gICAgICB2YXIgbWFwRm4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgdW5kZWZpbmVkO1xyXG4gICAgICB2YXIgVDtcclxuICAgICAgaWYgKHR5cGVvZiBtYXBGbiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAvLyA1LiBzaW5vblxyXG4gICAgICAgIC8vIDUuIGEuIHNpIElzQ2FsbGFibGUobWFwZm4pIGVzdCBmYWxzZSwgb24gbMOodmUgdW5lIFR5cGVFcnJvci5cclxuICAgICAgICBpZiAoIWlzQ2FsbGFibGUobWFwRm4pKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5mcm9tOiBsb3JzcXUgaWwgZXN0IHV0aWxpc8OpIGxlIGRldXhpw6htZSBhcmd1bWVudCBkb2l0IMOqdHJlIHVuZSBmb25jdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gNS4gYi4gc2kgdGhpc0FyZyBhIMOpdMOpIGZvdXJuaSwgVCBzZXJhIHRoaXNBcmcgOyBzaW5vbiBUIHNlcmEgdW5kZWZpbmVkLlxyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgVCA9IGFyZ3VtZW50c1syXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDEwLiBTb2l0IGxlblZhbHVlIHBvdXIgR2V0KGl0ZW1zLCBcImxlbmd0aFwiKS5cclxuICAgICAgLy8gMTEuIFNvaXQgbGVuIHBvdXIgVG9MZW5ndGgobGVuVmFsdWUpLlxyXG4gICAgICB2YXIgbGVuID0gdG9MZW5ndGgoaXRlbXMubGVuZ3RoKTtcclxuXHJcbiAgICAgIC8vIDEzLiBTaSBJc0NvbnN0cnVjdG9yKEMpIHZhdXQgdHJ1ZSwgYWxvcnNcclxuICAgICAgLy8gMTMuIGEuIFNvaXQgQSBsZSByw6lzdWx0YXQgZGUgbCdhcHBlbCDDoCBsYSBtw6l0aG9kZSBpbnRlcm5lIFtbQ29uc3RydWN0XV0gYXZlYyB1bmUgbGlzdGUgZW4gYXJndW1lbnQgcXVpIGNvbnRpZW50IGwnw6lsw6ltZW50IGxlbi5cclxuICAgICAgLy8gMTQuIGEuIFNpbm9uLCBzb2l0IEEgbGUgcsOpc3VsdGF0IGRlIEFycmF5Q3JlYXRlKGxlbikuXHJcbiAgICAgIHZhciBBID0gaXNDYWxsYWJsZShDKSA/IE9iamVjdChuZXcgQyhsZW4pKSA6IG5ldyBBcnJheShsZW4pO1xyXG5cclxuICAgICAgLy8gMTYuIFNvaXQgayDDqWdhbCDDoCAwLlxyXG4gICAgICB2YXIgayA9IDA7IC8vIDE3LiBPbiByw6lww6h0ZSB0YW50IHF1ZSBrIDwgbGVu4oCmXHJcbiAgICAgIHZhciBrVmFsdWU7XHJcbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XHJcbiAgICAgICAga1ZhbHVlID0gaXRlbXNba107XHJcbiAgICAgICAgaWYgKG1hcEZuKSB7XHJcbiAgICAgICAgICBBW2tdID0gdHlwZW9mIFQgPT09ICd1bmRlZmluZWQnID8gbWFwRm4oa1ZhbHVlLCBrKSA6IG1hcEZuLmNhbGwoVCwga1ZhbHVlLCBrKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgQVtrXSA9IGtWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgayArPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIDE4LiBTb2l0IHB1dFN0YXR1cyDDqWdhbCDDoCBQdXQoQSwgXCJsZW5ndGhcIiwgbGVuLCB0cnVlKS5cclxuICAgICAgQS5sZW5ndGggPSBsZW47IC8vIDIwLiBPbiByZW52b2llIEEuXHJcbiAgICAgIHJldHVybiBBO1xyXG4gICAgfTtcclxuICB9KSgpO1xyXG59XHJcbi8vIEVsZW1lbnQuY2xvc2VzdFxyXG5pZiAod2luZG93LkVsZW1lbnQgJiYgIUVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QpIHtcclxuICBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24ocykge1xyXG4gICAgdmFyIG1hdGNoZXMgPSAodGhpcy5kb2N1bWVudCB8fCB0aGlzLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocyksXHJcbiAgICAgIGksXHJcbiAgICAgIGVsID0gdGhpcztcclxuICAgIGRvIHtcclxuICAgICAgaSA9IG1hdGNoZXMubGVuZ3RoO1xyXG4gICAgICB3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2hlcy5pdGVtKGkpICE9PSBlbCkge31cclxuICAgIH0gd2hpbGUgKGkgPCAwICYmIChlbCA9IGVsLnBhcmVudEVsZW1lbnQpKTtcclxuICAgIHJldHVybiBlbDtcclxuICB9O1xyXG59XHJcbiIsImNvbnN0IG1vdXNld2hlZWxldnQgPSAvRmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAnRE9NTW91c2VTY3JvbGwnIDogJ21vdXNld2hlZWwnO1xyXG5jb25zdCBzY3JvbGxTcGVlZCA9IDIwO1xyXG5cclxuY29uc3Qgc2Nyb2xsSG9yaXpvbnRhbCA9IGZ1bmN0aW9uKGVsKSB7XHJcbiAgbGV0IHNjcm9sbCA9IDA7XHJcblxyXG4gIGNvbnN0IGNvbnRlbnRFbCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XHJcbiAgY29uc3QgaXRlbUxhc3QgPSBjb250ZW50RWwuY2hpbGRyZW5bY29udGVudEVsLmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xyXG4gIGNvbnN0IHNjcm9sbE1heCA9IGl0ZW1MYXN0Lm9mZnNldExlZnQgKyBpdGVtTGFzdC5vZmZzZXRXaWR0aCAtIGNvbnRlbnRFbC5vZmZzZXRMZWZ0IC0gY29udGVudEVsLm9mZnNldFdpZHRoO1xyXG5cclxuICBjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcihtb3VzZXdoZWVsZXZ0LCBmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgZGlmZlNjcm9sbCA9IGNvbnRlbnRFbC5zY3JvbGxMZWZ0IC0gc2Nyb2xsO1xyXG5cclxuICAgIGlmIChNYXRoLmFicyhkaWZmU2Nyb2xsKSA+IHNjcm9sbFNwZWVkKSB7XHJcbiAgICAgIHJldHVybiBzY3JvbGwgPSBjb250ZW50RWwuc2Nyb2xsTGVmdDtcclxuICAgIH1cclxuXHJcbiAgICBpZigoZS53aGVlbERlbHRhIHx8IGUuZGV0YWlsKSA+IDApIHtcclxuICAgICAgaWYgKHNjcm9sbCA+PSAwKSBzY3JvbGwgLT0gc2Nyb2xsU3BlZWQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoc2Nyb2xsIDw9IHNjcm9sbE1heCkgc2Nyb2xsICs9IHNjcm9sbFNwZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnRlbnRFbC5zY3JvbGxMZWZ0ID0gc2Nyb2xsO1xyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNjcm9sbEhvcml6b250YWw7Il19"}